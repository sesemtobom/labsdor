<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Extrator de Resultados de Exames</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            padding: 20px;
        }
        textarea {
            width: 100%;
            height: 300px;
            margin-bottom: 20px;
            padding: 10px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
            margin-bottom: 20px;
        }
        #resultado {
            font-weight: bold;
            font-size: 1.1em;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Extrator de Resultados de Exames</h1>
    <p>Cole o texto do laudo completo abaixo:</p>
    <textarea id="laudoInput" placeholder="Cole o texto do laudo aqui..."></textarea>
    <button onclick="extrairDados()">Extrair Dados</button>
    <div id="resultado"></div>

    <script>
        function extrairDados() {
            const texto = document.getElementById('laudoInput').value;
            
            // Função para encontrar valores no texto
            function encontrarValor(padrao, textoCompleto) {
                const regex = new RegExp(padrao, 'i');
                const match = textoCompleto.match(regex);
                return match ? match[1].trim() : "";
            }

            // Extração de valores específicos
            const hb = encontrarValor(/Hemoglobina\.+?:\s*([\d\.]+)/i, texto) || 
                      encontrarValor(/Hemoglobina:?\s*([\d\.]+)/i, texto);
            const ht = encontrarValor(/Hematócrito\.+?:\s*([\d\.]+)/i, texto) || 
                      encontrarValor(/Hematócrito:?\s*([\d\.]+)/i, texto);
            const leucocitos = encontrarValor(/Leucócitos\.+?:\s*([\d\.]+)/i, texto) || 
                               encontrarValor(/Leucócitos:?\s*([\d\.]+)/i, texto);
            const neutrofilos = encontrarValor(/Neutrófilos\.+?:\s*([\d\.]+)%/i, texto) || 
                                encontrarValor(/Neutrófilos:?\s*([\d\.]+)%/i, texto);
            const linfocitos = encontrarValor(/Linfócitos\.+?:\s*([\d\.]+)%/i, texto) || 
                               encontrarValor(/Linfócitos:?\s*([\d\.]+)%/i, texto);
            const plaquetas = encontrarValor(/Plaquetas\.+?:\s*([\d\.]+)/i, texto) || 
                              encontrarValor(/Plaquetas:?\s*([\d\.]+)/i, texto);
            const pcr = encontrarValor(/Proteína C Reativa[^:]*?:\s*([\d\.]+)/i, texto) || 
                        encontrarValor(/PCR[^:]*?:\s*([\d\.]+)/i, texto);
            const ureia = encontrarValor(/Uréia[^:]*?:\s*([\d\.]+)/i, texto) || 
                          encontrarValor(/Ureia[^:]*?:\s*([\d\.]+)/i, texto);
            const creatinina = encontrarValor(/Creatinina[^:]*?:\s*([\d\.]+)/i, texto);
            const sodio = encontrarValor(/Sódio[^:]*?:\s*([\d\.]+)/i, texto);
            const potassio = encontrarValor(/Potássio[^:]*?:\s*([\d\.]+)/i, texto);
            const calcio = encontrarValor(/Cálcio Iônico[^:]*?:\s*([\d\.]+)/i, texto) || 
                          encontrarValor(/CÁLCIO IÔNICO[^:]*?:\s*([\d\.]+)/i, texto);
            const magnesio = encontrarValor(/Magnésio[^:]*?:\s*([\d\.]+)/i, texto);
            const bilirrubina_total = encontrarValor(/Bilirrubina Total[^:]*?:\s*([\d\.]+)/i, texto);
            const bilirrubina_direta = encontrarValor(/Bilirrubina Direta[^:]*?:\s*([\d\.]+)/i, texto);
            const bilirrubina_indireta = encontrarValor(/Bilirrubina Indireta[^:]*?:\s*([\d\.]+)/i, texto);
            const tgo = encontrarValor(/TGO[^:]*?:\s*([\d\.]+)/i, texto) || 
                        encontrarValor(/Aspartato Aminotransferase[^:]*?:\s*([\d\.]+)/i, texto);
            const tgp = encontrarValor(/TGP[^:]*?:\s*([\d\.]+)/i, texto) || 
                        encontrarValor(/Alanina Aminotransferase[^:]*?:\s*([\d\.]+)/i, texto);
            
            // Gasometria
            const ph = encontrarValor(/pH\s*:\s*([\d\.]+)/i, texto);
            const bicarbonato = encontrarValor(/HCO3\s*:\s*([\d\.]+)/i, texto);
            const lactato = encontrarValor(/ÁCIDO LÁTICO\s*:\s*([\d\.]+)/i, texto) || 
                            encontrarValor(/Lactato\s*:\s*([\d\.]+)/i, texto);

            // Formatação do resultado final
            let resultado = `Hb ${hb} - Ht ${ht}% - I L ${leucocitos} - N ${neutrofilos}% - Ly ${linfocitos}% - Plq ${plaquetas} mil - I PCR ${pcr} - I HbGli - I U ${ureia} - Cr ${creatinina} - Na ${sodio} - K ${potassio} - Cat ${calcio} - Mg ${magnesio} - I Prot - Alb - I AcF - B12 - VitD - Fe - Ferr - IST - Tf - I Bt ${bilirrubina_total} - (Bi ${bilirrubina_indireta} - Bd ${bilirrubina_direta}) I FA - TGO ${tgo} - TGP ${tgp} - GGT - Amilase - Lipase - I GasoV: pH ${ph} - BIC ${bicarbonato} - Lac ${lactato}`;
            
            // Exibir resultado
            document.getElementById('resultado').textContent = resultado;
        }
    </script>
</body>
</html>
